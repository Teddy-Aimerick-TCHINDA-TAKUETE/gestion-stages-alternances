<!-- ğŸ“„ stage-form.component.html -->
<!-- Formulaire de crÃ©ation de stage -->

<h2>CrÃ©er une nouvelle offre de stage / alternance</h2>

<form [formGroup]="stageForm" (ngSubmit)="onSubmit()">
  <label>Titre :</label>
  <input type="text" formControlName="titre">
  <div *ngIf="stageForm.get('titre')?.invalid && stageForm.get('titre')?.touched" class="error">
    <span *ngIf="stageForm.get('titre')?.errors?.['required']">âŒ Le tire est requis.</span>
  </div>

  <label>Description :</label>
  <textarea formControlName="description"></textarea>
  <div *ngIf="stageForm.get('description')?.invalid && stageForm.get('description')?.touched" class="error">
    <span *ngIf="stageForm.get('description')?.errors?.['required']">âŒ La description est requis.</span>
  </div>

  <label>Lieu :</label>
  <input type="text" formControlName="lieu">
  <div *ngIf="stageForm.get('lieu')?.invalid && stageForm.get('lieu')?.touched" class="error">
    <span *ngIf="stageForm.get('lieu')?.errors?.['required']">âŒ Le lieu est requis.</span>
  </div>

  <label>DurÃ©e :</label>
  <input type="text" formControlName="duree">
  <div *ngIf="stageForm.get('duree')?.invalid && stageForm.get('duree')?.touched" class="error">
    <span *ngIf="stageForm.get('duree')?.errors?.['required']">âŒ La durrÃ©e est requis.</span>
  </div>

  <label>Type :</label>
  <select formControlName="type">
    <option *ngFor="let option of typeStageOptions" [value]="option">{{ option }}</option>
  </select>
  <div *ngIf="stageForm.get('type')?.invalid && stageForm.get('type')?.touched" class="error">
    <span *ngIf="stageForm.get('type')?.errors?.['required']">âŒ Le type est requis.</span>
  </div>

  <label *ngIf="authService.isAdmin()">Entreprise :</label>
  <select *ngIf="authService.isAdmin()" formControlName="entrepriseId">
    <option *ngFor="let entreprise of entreprises" [value]="entreprise.id">
      {{ entreprise.nom }}
    </option>
  </select>
  <div *ngIf="authService.isAdmin() && stageForm.get('entrepriseId')?.invalid && stageForm.get('entrepriseId')?.touched" class="error">
    <span *ngIf="stageForm.get('entrepriseId')?.errors?.['required']">âŒ L'entreprise est requise.</span>
  </div>

  <button type="submit" [disabled]="stageForm.invalid">CrÃ©er</button>
</form>